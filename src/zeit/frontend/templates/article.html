{% extends "templates/layout.html" %}
{% import 'templates/block_elements.tpl' as blocks %}
{% block content %}
    <article class="article" id="js-article">
        <div class="article__wrap">
            <div class="article__head-wrap">
                <header class="article__title-wrap">
                    <div class="is-constrained is-centered">
                        <h2 class="article__supertitle">
                            {{ view.supertitle }}
                        </h2>
                        <h1 class="article__title">
                            {{view.title}}
                        </h1>
                        <div class="article__meta">
                            {{ blocks.author_date(view.publish_date | format_date('long'), view.source) }}
                        </div>
                        <div class="article__opener">
                            <span class="article__subtitle">
                                <p>{{view.subtitle}}</p>
                            </span>
                            <span class="article__meta">
                                {% if view.genre -%}
                                    <span class="article__meta__genre">{{view.genre}}</span>
                                {%- endif %}
                                {{ blocks.meta_author(view.author) }}
                                {% if view.location -%}
                                    <span class="article__meta__location">{{view.location}}</span>
                                {%- endif %}
                            </span>
                        </div>
                    </div>
                </header>
                {% if view.header_img %}
                    {{ blocks.img(view.header_img) }}
                {% endif %}

            </div>

            <div class="article__body">

                {% for page in view.pages %}
                <div class="article__page">
                    {% for item in page %}
                            {{ blocks[item|block_type](item)}}
                    {% endfor %}
                </div>
                {% endfor %}

                {% if view.rankedTags %}
                <div class="article__tags is-constrained is-centered">
                    <span class="article__tags__title">Tags</span>
                    {% for tag in view.rankedTags %}
                            {% for item in tag %}
                                <a href="#{{ item.url }}">{{ item.html }}</a>
                                {% if not loop.last %}
                                    ,
                                {% endif %}
                            {% endfor %}
                    {% endfor %}
                </div>
                {% endif %}

                <div class="article__comments-trigger" id="js-comments-trigger">
                    <span class="article__comments-trigger__count icon-close">47</span>
                    Kommentare
                </div>
                <section class="comments" id="js-comments">
                    <div class="comments__head" id="js-comments-head">
                        <h4 class="comments__head__cta">Es existieren bereits <strong>47</strong> Kommentare zu diesem Thema – wie stehen Sie dazu?</h4>
                        <span class="button comments__head__trigger">Kommentieren</span>
                        <form class="comments__head__form">
                            <textarea>Post stuff here</textarea>
                            <input type="submit" value="Absenden" />
                        </form>
                    </div>
                    <div class="tabs has-2">
                        <div class="tabs__head" id="js-comments-tabs-head">
                            <a href="#tab1" class="tabs__head__tab is-active">Alle</a>
                            <a href="#tab2" class="tabs__head__tab">Ausgewählte</a>
                        </div>
                        <div class="comments__body" id="js-comments-body">
                            <div class="tabs__content is-active">
                                <a name="tab1"></a>
                                <div class="comments__list">
                                    {% for x in range(0, 40) %}
                                        <article class="comment">
                                            <div class="comment__head">
                                                <img src="/img/exner.jpg" class="comment__head__img" />
                                                <strong class="comment__head__name">
                                                    Maria Exner
                                                    <span class="comment__head__name__label">C</span>
                                                </strong>
                                                <span class="comment__head__date">vor 7 Minuten</span>
                                            </div>
                                            <div class="comment__body">
                                                <p>...aber er wird wohl keine große politische Karriere machen. Anpassung ist da wesentlich förderlicher für das eigene Weiterkommen. Die Partei wird in in weiten Teilen erstmal gehöhrig ausgrenzen und das obwohl ein großer Teil der eigenen Basis so denkt.</p>
                                            </div>
                                            <aside class="comment__tools">
                                                <a class="comment__tools__reply icon-reply">Melden</a>
                                                <a class="comment__tools__reply icon-reply">Antworten</a>
                                            </aside>
                                        </article>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="tabs__content">
                                <a name="tab2"></a>
                                <div class="comments__list">
                                    {% for x in range(0, 30) %}
                                        <article class="comment">
                                            <div class="comment__head">
                                                <img src="/img/exner.jpg" class="comment__head__img" />
                                                <strong class="comment__head__name">
                                                    Maria Exner
                                                    <span class="comment__head__name__label">C</span>
                                                </strong>
                                                <span class="comment__head__date">vor 20 Minuten</span>
                                            </div>
                                            <div class="comment__body">
                                                <p>mal gehöhrig ausgrenzen und das obwohl ein großer Teil der eigenen Basis so denkt.</p>
                                                <p>...aber er wird wohl keine große politische Karriere machen. Anpassung ist da wesentlich förderlicher für das eigene Weiterkommen. Die Partei wird in in weiten Teilen</p>
                                                <p>...aber er wird wohl keine große politische Karriere machen. Anpassung ist da wesentlich förderlicher für das eigene Weiterkommen. Die Partei wird in in weiten Teilen</p>
                                            </div>
                                            <aside class="comment__tools">
                                                <a class="comment__tools__report icon-report">Melden</a>
                                                <a class="comment__tools__reply icon-reply">Antworten</a>
                                            </aside>
                                        </article>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="comments__body__prev" id="js-comments-body-next">Neuere</div>
                            <div class="comments__body__next" id="js-comments-body-prev">Ältere</div>
                        </div>
                    </div>
                </section>

                {{ blocks.focussed_nextread(view.focussed_nextread) }}

            </div>
        </div>
	</article>
{% endblock content %}
