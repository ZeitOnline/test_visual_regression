{% import 'zeit.web.site:templates/macros/layout_macro.tpl' as lama %}
{% import 'zeit.web.site:templates/macros/centerpage_macro.tpl' as cp %}

<div class="{{ 'cp-area' | with_mods(area.kind) }}{% if area.visible_mobile == False %} mobile-hidden{% endif %}">
    {% profile %}
    {% block before_module_list %}{% endblock %}
    {% block module_list %}
        {% for module in area.values() | map('get_module') -%}
            {% set teaser = module | first_child %}
            {% set layout = module | get_layout %}
            {% set journalistic_format = module | get_journalistic_format %}

            {# ZON-2011: if there is no author image on columns, render as default teaser #}
            {% if journalistic_format == 'column' and not get_column_image(teaser) %}
                {% set journalistic_format = None %}
            {% endif %}

            {% set module_loop = loop %}
            {% block before_module_include scoped %}{% endblock %}
            {% include [
                "zeit.web.site:templates/inc/teaser/{0}_{1}_{2}.tpl".format(layout, journalistic_format, area.kind),
                "zeit.web.site:templates/inc/teaser/{0}_{1}.tpl".format(layout, journalistic_format),
                "zeit.web.site:templates/inc/module/{0}_{1}.html".format(layout, area.kind),
                "zeit.web.site:templates/inc/teaser/{0}_{1}.tpl".format(layout, area.kind),
                "zeit.web.site:templates/inc/module/{}.html".format(layout),
                "zeit.web.site:templates/inc/teaser/{}.tpl".format(layout),
                "zeit.web.site:templates/inc/teaser/default.tpl"] %}
            {% block after_module_include scoped %}{% endblock %}
        {% endfor %}
    {% endblock module_list %}
    {% block after_module_list %}{% endblock %}
    {% endprofile %}
</div>
