{% import 'zeit.web.site:templates/macros/layout_macro.tpl' as lama %}

{% if view.is_hp %}
{{ lama.adplace(banner(10), view) }}
{% endif %}

<section class="video-stage" id="video-stage">
    {# html5, eine section braucht eine headline, falls das seomäßig nicht geht, können wir auch nicht section nehmen (NB) #}
    <header>
        <h6 class="video-stage-heading">Videos auf {{ lama.use_svg_icon('logo-zon-white', 'video-stage-heading__logo', view.package) }}</h6>
    </header>
    {# We heard you like modules, so we put some modules in your module (ND) #}
    <div class="video-stage-main">
        {% with %}
            {% set teaser = module.videos[0] %}
            {% include "zeit.web.site:templates/inc/teaser/video-large.tpl" %}
            {{- view.append_to_webtrekk_assets(['video', region_loop.index, 1, 1] | join('.')) -}}
        {% endwith %}
        <div id="placeHolder">
    <button onclick="addPlayer()">Add Player</button>
  </div>
      <!-- custom script -->
      <script type="text/JavaScript">
        var myPlayer,
          playerHTML,
          playerData = {
            'accountId': '18140073001',
            'playerId': '65fa926a-0fe0-4031-8cbf-9db35cecf64a',
          };

        function addPlayer() {
          // dynamically build the player video element
          playerHTML = '<video id=\"myPlayer\" data-account=\"' + playerData.accountId + '\" data-player=\"' + playerData.playerId + '\" data-embed=\"default\" class=\"video-js\" controls></video>';
          // inject the player code into the DOM
          document.getElementById('placeHolder').innerHTML = playerHTML;
          // add and execute the player script tag
          var s = document.createElement('script');
          s.src = "http://players.brightcove.net/" + playerData.accountId + "/" + playerData.playerId + "_default/index.min.js";
          document.body.appendChild(s);
          s.onload = callback;
        }

        function callback() {
          myPlayer = videojs('myPlayer');
        }
      </script>
    </div>
    <div class="video-stage-secondary">
        <h6 class="video-stage-secondary__title">Die neuesten Videos</h6>
        {% for teaser in module.videos[1:4] %}
            {% include "zeit.web.site:templates/inc/teaser/video-small.tpl" %}
            {{- view.append_to_webtrekk_assets(['video', region_loop.index, 2, loop.index] | join('.')) -}}
        {% endfor %}
    </div>
    <footer class="video-stage-footer">
        <div class="video-series">
            {# ist so nicht accessible umzusetzen, ohne js auch nicht bedienbar (NB) #}
            <label for="series_select" class="video-series__label">Videoserien</label>
            <select id="series_select" class="video-series__select" name="serie">
                <option>Bitte auswählen</option>
                {% for video in module.video_series_list %}
                    <option value="{{ video.url }}">{{ video.title }}</option>
                {% endfor %}
            </select>
        </div>
        {# Sind doch gar nicht alle Videos? (NB) #}
        <a class="video-centerpage-link" href="{{ 'http://xml.zeit.de/video' | create_url }}">Alle Videos</a>
    </footer>
</section>
