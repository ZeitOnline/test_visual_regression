{% extends 'zeit.web.site:templates/content.html' %}

{% block structured_data -%}
    {% include "zeit.web.core:templates/inc/structured-data/video.html" %}
{% endblock structured_data -%}

{% block content %}
    <article class="article article--padded article--video" id="js-article"
        {% if view.serie %} data-video-series="{{ view.serie | format_webtrekk }}"{% endif %}
        data-video-provider="brightcove"
        data-video-size="large"
        data-video-page-url="{{ view.content_url }}{% if view.slug %}/{{ view.slug }}{% endif %}"
        itemprop="mainEntity"
        itemscope
        itemtype="http://schema.org/VideoObject"
        itemid="{{ view.basename }}"
        itemref="publisher">
        {% profile %}
        <link itemprop="mainEntityOfPage" href="{{ view.canonical_url }}">
        <meta itemprop="playerType" content="HTML5 Flash">
        <meta itemprop="name" content="{{ view.title }}">
        <meta itemprop="uploadDate" content="{{ view.date_last_modified | format_date('iso8601') }}">
        {% if view.iso_duration %}
            <meta itemprop="duration" content="{{ view.iso_duration }}">
        {% endif %}
        {% require image = get_image(view.context, variant_id="wide", fallback=False) %}
            <meta itemprop="thumbnailUrl" content="{{ request.image_host + image.path }}">
        {% endrequire %}

        <div class="article__item article__item--wide article__item--rimless">
            <div class="js-videoplayer"
                 data-video-id="{{ view.context.__name__ }}"
                 data-video-advertising="{{ 'withAds' if view.has_advertisement else 'withoutAds' }}"
                 data-video-playertype="cp"></div>
        </div>

        {% if view.advertising_enabled %}
            {% include "zeit.web.core:templates/inc/ads/places/desktop/place8.html" %}
        {% endif %}

        {% include "zeit.web.site:templates/inc/article/heading.tpl" %}

        <div class="article__item" data-ct-area="articleheader">
            <div class="summary" itemprop="description">
                {{ view.subtitle }}
            </div>
            {%- set byline = view.context | get_byline('main') %}
            {% if byline | length -%}
                <div class="{{ 'byline' | with_mods('on-videopage') }}" data-ct-row="author">
                {% include 'zeit.web.core:templates/inc/meta/byline.html' %}
                </div>
            {% endif -%}
            <div class="metadata">
                {% include "zeit.web.core:templates/inc/article/metadata.tpl" %}
            </div>
            {% include "zeit.web.site:templates/inc/article/sharing-menu.html" %}
            {% set tag_modifier = "video" %}
            {% include "zeit.web.core:templates/inc/article/tags.html" %}
        </div>
        {% endprofile %}
    </article>
{% endblock %}
