{% extends "zeit.web.site:templates/content.html" %}
{% import "zeit.web.site:templates/macros/article_macro.tpl" as blocks with context %}

{% macro render_page(page) %}
    {% for item in page %}
        {{ (blocks[item | block_type] or blocks["no_block"])(item) }}
    {% endfor %}
{% endmacro %}

{% block content_ad_script -%}
{% if view.context.advertising_enabled %}
<!-- content ad script, commented out until toggled -->
<!--script type="text/javascript">
    (function() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = document.location.protocol + '//cdn.iqcontentplatform.de/iq.js';
        var sc = document.getElementsByTagName('script')[0]; sc.parentNode.insertBefore(s, sc);
    })();
</script-->
{% endif %}
{%- endblock %}


{% block article_pages %}
    <div class="article-page">
        {{ render_page(view.current_page) }}
    </div>
{% endblock article_pages %}

{% block article_pagination %}
    {% include "zeit.web.site:templates/inc/article/pagination.tpl" ignore missing %}
{% endblock article_pagination %}

{% block article_interactions %}
    <div class="article-interactions">
        <span class="interaction-print"></span>
        <span class="more-interactions"></span>
        <span class="sharing">
            Teilen
            {# Facebook's sharer.php seems to be deprecated, but nevertheless still works
               it fetches all article related information out of the open graph og:-tags #}
            <a class="sharing-link sharing-link--facebook" href="http://www.facebook.com/sharer/sharer.php?u={{ view.article_url }}" target="_blank">
                Facebook
            </a>
            <a class="sharing-link sharing-link--twitter" href="http://twitter.com/intent/tweet?text={{ view.title }}&url={{ view.article_url }}&via=zeitonline" target="_blank">
                Twitter
            </a>
            {# Google+ will be closed in the near future, all info is fetched automaticall, no params needed #}
            <a class="sharing-link sharing-link--googleplus" href="https://plus.google.com/share?url={{ view.article_url }}" target="_blank">
                Google +
            </a>
            <a class="sharing-link sharing-link--mail" href="mailto:?subject={{ view.title }} - Artikel auf ZEIT ONLINE">
                Mail
            </a>
        </span>
    </div>
{% endblock %}
