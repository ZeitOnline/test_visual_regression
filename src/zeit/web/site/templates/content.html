{% extends 'zeit.web.site:templates/layout.html' %}

{# Sometimes (if the author has no image), colums are rendered as default
   articles (instead of column.html). In this case, we need to adjust a few
   Things inside the article template (here). #}

{% block main %}
    {% block advertorial_marker %}{% endblock advertorial_marker %}
    {% block content %}
    <article class="article article--{{ view | block_type }}" id="js-article" itemprop="mainEntity" itemscope itemtype="http://schema.org/Article" itemid="{{ view.basename }}" itemref="publisher">
        <link itemprop="mainEntityOfPage" href="{{ view.canonical_url }}">
    {% profile %}
        {% block article_heading %}
            <div class="article__item">
                {{ view.embed_header }}
                {% set headertag = 'div' if view.pagination and view.pagination.current > 1 and view.current_page.teaser else 'h1' %}
                <{{ headertag }} class="article-heading" itemprop="headline">
                    <span class="article-heading__kicker">
                        {%- if view.context is column -%}
                            {{- view.serie + ' / ' -}}
                        {%- endif -%}
                        {{- view.supertitle -}}
                    </span>
                    {%- if view.title %}<span class="visually-hidden">: </span>{% endif -%}
                    <span class="article-heading__title">
                        {{- view.title -}}
                    </span>
                </{{ headertag }}>
            </div>
        {% endblock article_heading %}
        {% block article_meta %}
            <div class="article__item">
            {% if view.pagination and view.pagination.current > 1 %}
                <div class="article__page-teaser">
                    Seite {{ view.pagination.current }}/{{ view.pagination.total }}
                    {%- if view.current_page.teaser -%}
                        : <h1>{{ view.current_page.teaser }}</h1>
                    {% endif %}
                </div>
            {% else %}
                <div class="summary" itemprop="description">
                    {{ view.subtitle }}
                </div>
                {%- set byline = view.context | get_byline('main') %}
                {% if byline | length -%}
                <div class="byline">
                    {% include 'zeit.web.core:templates/inc/meta/byline.html' %}
                </div>
                {% endif -%}
                <div class="metadata">
                    {% include "zeit.web.core:templates/inc/article/metadata.tpl" %}
                </div>
            {% endif %}
            </div>
        {% endblock article_meta %}
    {% endprofile %}
    {% profile %}
        {% block article_body %}
        <div class="article-body article-body--{{ view | block_type }}" itemprop="articleBody">
            {% block article_main_image %}
            {% endblock article_main_image %}
            {% block article_pages %}
                <!-- Here goes the content for a page -->
            {% endblock article_pages %}
            {% block article_pagination %}
                <!-- Here goes the pagination -->
            {% endblock article_pagination %}
        </div>
        {% endblock article_body %}
    {% endprofile %}
    </article>

    {% block lineage %}
        {% include "zeit.web.site:templates/inc/article/lineage.tpl" %}
    {% endblock %}

    {% endblock content %}

    {% block article_footer %}
    <div class="article-footer article__item" data-ct-area="articlebottom">
        {% block article_interactions %}
        <div class="article-interactions">
            {% include "zeit.web.site:templates/inc/article/sharing-menu.tpl" %}
            {% block print %}
            {% endblock %}
        </div>
        {% endblock %}

        {% block article_tags %}
            {% include "zeit.web.core:templates/inc/article/tags.html" %}
        {% endblock %}
    </div>
    {% endblock %}

    {% block nextread %}
        {% set module = view.nextread %}
        {% include "zeit.web.site:templates/inc/article/nextread.tpl" %}
    {% endblock %}

    {% block veeseo_div %}{% endblock %}

    {% block nextread_ad %}
        {% set module = view.nextread_ad %}
        {% include "zeit.web.site:templates/inc/article/nextread.tpl" %}
    {% endblock %}

    {% block article_google_ad %}
        {% if view.context.advertising_enabled -%}
            {{ lama.adplace(view.banner(5), view) }}
        {%- endif %}
    {% endblock article_google_ad %}
    {% block comments %}
    {% profile %}
        {% include "zeit.web.core:templates/inc/article/comments.html" %}
    {% endprofile %}
    {% endblock comments %}

{% endblock main %}

{% block progress_circle %}
<script id="circle_progress_script" type="text/template">
    <div id="overscrolling" class="overscrolling">
        <div id="overscrolling_target" class="overscrolling__target"></div>
        <div id="overscrolling_indicator" class="circle-progress overscrolling__indicator">
            <svg id="circle_progress_svg" class="circle-progress__svg" width="150" height="150" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <circle shape-rendering="geometricPrecision" class="circle-progress__fill" r="70" cx="75" cy="75" stroke="#fff" fill="rgba(0,0,0,0.6)" stroke-dasharray="458.672" stroke-dashoffset="0"></circle>
                <circle shape-rendering="geometricPrecision" id="circle_progress_bar" class="circle-progress__bar" r="70" cx="75" cy="75" transform="rotate(270,75,75)" fill="transparent" stroke="transparent" stroke-dasharray="458.672"></circle>
            </svg>
        </div>
    </div>
</script>
{% endblock %}

{% block veeseo %}
    <script src="http://rce.veeseo.com/widgets/zeit/widget.js"></script>
{% endblock %}
