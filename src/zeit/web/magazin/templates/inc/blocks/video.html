{% import 'zeit.web.core:templates/macros/video_macro.tpl' as vima %}

{% if block.id and 'header' not in block.format | default('') -%}
<figure class="
    {% if block.format == 'zmo-small-left' or block.format == 'small' %}
        figure-stamp
    {% elif block.format == 'large' or block.format == 'zmo-large-left' or block.format == 'zmo-large-center' or block.format == 'zmo-large-right' %}
        figure-full-width
    {% elif block.format == 'zmo-small-right' %}
         figure-stamp--right
    {% else %}
         figure is-constrained is-centered
    {% endif %}"
    {%- if block.video.serie and block.video.serie.serienname %} data-video-series="{{ block.video.serie.serienname | format_webtrekk }}"{% endif %}
    data-video-size="large"
    data-video-provider="brightcove"
    data-video-page-url="{{ block.video | create_url }}">
    {% set player = settings('brightcove_videoplayer_article', 'c09a3b98-8829-47a5-b93b-c3cca8a4b5e9') %}
    {% if toggles('zon_inline_video_via_html5') %}
        {{ vima.brightcove_video_tag(block.id, iframe=False, brightcove_player=player) }}
    {% else %}
        {{ vima.brightcove_video_tag(block.id, iframe=True, brightcove_player=player) }}
    {% endif %}

    {% block video_caption -%}
    <figcaption class="figure__caption">
        {{ block.description }}
    </figcaption>
    {%- endblock %}

</figure>
{% endif %}
