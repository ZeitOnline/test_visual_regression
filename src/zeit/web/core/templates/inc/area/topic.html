{% extends "zeit.web.core:templates/inc/area/default.html" %}

{% block image_variant %}cinema{% endblock %}
{% block is_topic_variant %}{% endblock %}

{% block module_list %}
    <section class="{% block topic_class %}teaser-topic{% endblock %}">
        {% if area.values() | length > 0 %}
            {% set module = area.values()[0] %}

            {% if area.referenced_cp is not none %}
                {% set teaser = area.referenced_cp %}
            {% else %}
                {% set teaser = module | first_child %}
            {% endif %}

            {% set image = get_image(module, teaser, variant_id=self.image_variant()) %}
            {% set module_layout = self.topic_class() %}
            {% include "zeit.web.core:templates/inc/asset/image_topic_teaser.tpl" %}

            {% set topic_layout = self.topic_class() + '-main' %}
            {% set is_topic_variant = self.is_topic_variant() %}

            {% if not is_topic_variant %}
                {% include "zeit.web.core:templates/inc/teaser/topic-main.tpl" %}
            {% endif %}

            <div class="{{ self.topic_class() }}-list">
                {% if is_topic_variant %}
                    {% include "zeit.web.core:templates/inc/teaser/topic-main.tpl" %}
                {% endif %}

                {% for module in area.values()[0:3] -%}
                    {% set teaser = module | first_child %}
                    {% set layout = module | get_layout %}

                    {% include [
                    "{0}:templates/inc/teaser/{1}.tpl".format(view.package, layout),
                    "{0}:templates/inc/teaser/{1}.tpl".format('zeit.web.core', layout),
                    "zeit.web.core:templates/inc/teaser/topic.tpl"] %}
                {% endfor %}
            </div>
        {% endif %}
    </section>
{% endblock %}
