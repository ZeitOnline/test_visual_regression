{%- set keywords = teaser.keywords | map(attribute='label') -%}
{%- set keywords_extra = [teaser.ressort, teaser.sub_ressort] -%}
<url>
    <loc>{{ teaser.uniqueId | create_url }}</loc>
    <lastmod>{{ teaser | mod_date }}</lastmod>
    <n:news>
        <n:publication>
            <n:name>ZEIT ONLINE</n:name>
            <n:language>de</n:language>
        </n:publication>
        <n:title>{{ teaser.supertitle }}: {{ teaser.title }}</n:title>
        <n:keywords>
            {%- for keyword in keywords | list + keywords_extra | list -%}
                {%- if loop.index > 1 -%}{{ ', ' }}{%- endif -%}{{ keyword | trim }}
            {%- endfor -%}
        </n:keywords>
    </n:news>
    {% require image = get_image(module, variant_id='wide', fallback=False) %}
        {%- set source = request.image_host + image.path + '__1300x731' -%}
        {%- set copyright = image.copyrights | map('first') | join(', ') -%}
        {%- if copyright -%}
            {%- set copyright = '(' ~ copyright ~ ')' -%}
        {%- endif -%}
        <image:image>
            <image:loc>{{ source }}</image:loc>
            <image:caption>{{ [image.caption, copyright] | reject('none') | join(' ') }}</image:caption>
            <image:title>{{ image.title }}</image:title>
            <image:license>{{ copyright_url }}</image:license>
        </image:image>
    {% endrequire %}
</url>
