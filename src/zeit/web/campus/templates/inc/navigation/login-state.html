{% import 'zeit.web.campus:templates/macros/layout_macro.tpl' as lama %}

{% if user %}
	<a class="nav__login-title" href="{{ profile }}" role="button" aria-controls="user-menu" id="login-state" data-sso-id="{{ user.ssoid }}">
		{% if user.picture -%}
			<span class="nav__user-picture" style="background-image: url({{ request.session.user.picture }})"></span>
		{%- else %}
			<span class="nav__user-picture nav__user-picture--default">
				{{ lama.use_svg_icon('avatar', 'nav__user-avatar', view.request) }}
			</span>
		{%- endif %}

		<span class="nav__user-name">{{ user.name or 'Angemeldet' }}</span>
	</a>
	<ul class="nav__login-list" id="user-menu" aria-hidden="true">
		<li><a href="{{ profile }}">Account</a></li>
		<li>
			<a href="{{ logout }}">
				Abmelden
				{{ lama.use_svg_icon('login', 'nav__login-icon', view.request) }}
			</a>
		</li>
	</ul>
{% else %}
	<a href="{{ login }}" class="nav__login-link">
		Anmelden
		<span class="nav__login-register">
			/ Registrieren
			{{ lama.use_svg_icon('login', 'nav__login-icon', view.request) }}
		</span>
	</a>
{% endif %}
