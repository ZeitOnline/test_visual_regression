{% import 'zeit.web.campus:templates/macros/layout_macro.tpl' as lama %}

<footer class="footer" data-ct-area="campus-footernav">
    {% block breadcrumbs -%}
        {%- include "zeit.web.core:templates/inc/breadcrumbs.html" -%}
    {%- endblock breadcrumbs %}
    <div class="footer__navigation footer__item" itemscope itemtype="http://schema.org/SiteNavigationElement">
        <a href="{{ request.route_url('home') }}campus/index" data-ct-row="logo" data-ct-label="logo">
            {{- lama.use_svg_icon('logo-zco', 'footer__logo', view.package) -}}
        </a>
        <div class="footer__links" data-ct-row="1">
            <strong class="footer__linkitem">Verlag</strong>
            <a class="footer__link" href="http://www.zeit-verlagsgruppe.de/anzeigen/" itemprop="url">
                <span itemprop="name">Mediadaten</span>
            </a>
            <a class="footer__link" href="http://www.zeit-verlagsgruppe.de/marken-und-produkte/geschaeftskunden/artikel-nachrucke/" itemprop="url">
                <span itemprop="name">Rechte & Lizenzen</span>
            </a>
        </div>
        <div class="footer__links" data-ct-row="2">
            {% if view is not framebuilder %}
                <a class="footer__link js-image-copyright-footer" href="#bildrechte">
                    Bildrechte
                </a>
            {% endif %}
            <a class="footer__link" href="{{ request.route_url('home') }}hilfe/datenschutz" itemprop="url">
                <span itemprop="name">Datenschutz</span>
            </a>
            <a class="footer__link" href="http://www.iqm.de/digital/nutzungsbasierte-onlinewerbung/" itemprop="url">
                <span itemprop="name">Cookies</span>
            </a>
            <a class="footer__link" href="{{ request.route_url('home') }}administratives/agb-kommentare-artikel" itemprop="url">
                <span itemprop="name">AGB</span>
            </a>
            <a class="footer__link" href="{{ request.route_url('home') }}impressum/index" itemprop="url">
                <span itemprop="name">Impressum</span>
            </a>
            <a class="footer__link" href="{{ request.route_url('home') }}hilfe/hilfe" itemprop="url">
                <span itemprop="name">Hilfe/ Kontakt</span>
            </a>
        </div>
    </div>

    {% if view is not framebuilder %}
        {% include "zeit.web.core:templates/inc/inline_js/image-copyright-template.html" %}
    {% endif %}

    {% if toggles('optimize_ab_testing') -%}
        <script type="text/javascript">
            (function () {
                if (typeof window.Zeit !== 'object') {
                    return;
                }

                window.Zeit.getOptimizeString = function () {
                    if (typeof window.gaData !== 'object') {
                        return "undefined";
                    }
                    /**
                    * ENTER DATA HERE
                    * property: Enter the Google Analytics PropertyID in Google Optimize
                    **/
                    var property = "UA-18122964-8";

                    /**
                    * format a given string to usage with webtrekk parameters naming style
                    * @param  str String
                    * @return String
                    *
                    * @notice by first changing case, we have don't have to search for upper case letters
                    **/
                    function formatStringForWebtrekk(str) {
                        var regex = /[Ã¶Ã¤Ã¼Ã–Ã„ÃœÃŸ\s\;\#]/g,
                            translate = { 'Ã¤': 'ae', 'Ã¶': 'oe', 'Ã¼': 'ue', 'ÃŸ': 'ss', ' ': '_', ';': '_', '#': '_' };
                        return (str.toLowerCase().replace(regex, function (match) {
                            return translate[match];
                        }).replace(/[\_]{2,}/g, '_'));
                    }

                    /**
                    * find the active google optimize experiment and log to webtrekk
                    **/
                    // variables always first
                    var experiments, expVarName, out = "", data = window.gaData;
                    // check for optimizely object moved to top level
                    if (typeof data[property] !== 'undefined' && data[property].experiments !== 'undefined') {
                        experiments = data[property].experiments;
                        for (var key in experiments) {
                            if (!experiments.hasOwnProperty(key)) continue;
                            // one stop function incl. lowercase and repeating underscore prevention
                            if (experiments[key] == "0") {
                                expVarName = "original";
                            } else {
                                expVarName = "variation_" + experiments[key];
                            }
                            out += formatStringForWebtrekk(key) + "." + expVarName + ";";
                        }
                    } else {
                        return "undefined";
                    }

                    return out.replace(/\;+$/g, '');
                };
            })();
        </script>
    {% endif -%}
</footer>
