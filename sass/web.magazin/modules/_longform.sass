$longform-content-max-width: 615px
$longform-inline-max-width: 920px
$longform-image-caption-max-width: 695px
$bp-adjust-horizontal-figures--1: 1120px
$bp-adjust-horizontal-figures--2: 1320px
$bp-adjust-horizontal-figures--3: 1385px
$bp-adjust-horizontal-figures--4: 1450px
$longform-header-offset: 50px
$longform-header-min-height: 400px
$longform-header-max-height: 1400px

.article--longform
  padding: 0
  max-width: none

  .article__head__title
    color: $white
    font-size: $font-xl
    margin-bottom: $fine
    +respond-min($break-1)
      font-size: $font-xxl
    +respond-min($break-2)
      font-size: $font-xxxl
    +respond-min($break-4)
      font-size: $font-xxxxl

  .article__head__subtitle
    margin-bottom: 0
    p
      max-width: 25em
      color: $grey--dark
      text-align: center
      font-size: $font-ml
      margin-bottom: 0 !important
      +respond-min($break-2)
        font-size: $font-l
      +respond-min($break-3)
        font-size: $font-xl

  p
    max-width: 38.88em
    +respond-min($break-3)
      max-width: 35em

  .article__head-wrap
    position: relative
    overflow: hidden
    padding-top: 0
    margin-top: 0
    +fake-box-shadow-inset($black)
    min-height: em($longform-header-min-height)
    max-height: em($longform-header-max-height)
    height: em(400px)
    +respond-min-h(em(500px))
      height: em(500px) - em($longform-header-offset)
    +respond-min-h(em(550px))
      height: em(550px) - em($longform-header-offset)
    +respond-min-h(em(600px))
      height: em(600px) - em($longform-header-offset)
    +respond-min-h(em(650px))
      height: em(650px) - em($longform-header-offset)
    +respond-min-h(em(700px))
      height: em(700px) - em($longform-header-offset)
    +respond-min-h(em(750px))
      height: em(750px) - em($longform-header-offset)
    +respond-min-h(em(800px))
      height: em(800px) - em($longform-header-offset)
    +respond-min-h(em(850px))
      height: em(850px) - em($longform-header-offset)
    +respond-min-h(em(900px))
      height: em(900px) - em($longform-header-offset)
    +respond-min-h(em(950px))
      height: em(950px) - em($longform-header-offset)
    +respond-min-h(em(1000px))
      height: em(1000px) - em($longform-header-offset)
    +respond-min-h(em(1050px))
      height: em(1050px) - em($longform-header-offset)
    +respond-min-h(em(1100px))
      height: em(1100px) - em($longform-header-offset)
    +respond-min-h(em(1150px))
      height: em(1150px) - em($longform-header-offset)
    +respond-min-h(em(1200px))
      height: em(1200px) - em($longform-header-offset)
    +respond-min-h(em(1250px))
      height: em(1250px) - em($longform-header-offset)
    +respond-min-h(em(1300px))
      height: em(1300px) - em($longform-header-offset)
    +respond-min-h(em(1350px))
      height: em(1350px) - em($longform-header-offset)
    +respond-min-h(em(1400px))
      height: em(1400px) - em($longform-header-offset)

  .article__head-image
    height: 100%
    img
      min-width: 100%
      min-height: 100%
      max-width: none
      max-height: none

  .article__main-video--longform
    overflow: hidden
    position: relative
    height: 100%
    z-index: 1
    video
      display: none
      position: absolute
      bottom: 0
      left: 0
      min-width: 100%
      min-height: 100%
      max-width: none

  .article__title-wrap
    position: absolute
    overflow: hidden
    text-align: center
    bottom: 0
    padding-left: 5%
    padding-right: 5%
    width: 100%
    z-index: 2
    .article__head__meta
      font-size: $font-xs
      letter-spacing: $hair
      color: $white
      margin-bottom: 3em
      margin-left: auto
      text-align: center
      letter-spacing: 2px
      margin-right: auto
      +respond-min($break-2)
        font-size: $font-s
      +respond-min($break-4)
        font-size: $font-m
      a
        +link-colors($white, $white, $white, $white, $white)
        border-color: $white

  &.has-light-header
    .article__head-wrap
      background-color: $charcoal
      color: $charcoal
      &:after
        +box-shadow(none)
    .article__title-wrap
      .article__head__title, .article__head__meta
        +text-shadow(rgba($white, 1) 0 0 30px)
        color: $black
      .article__head__meta a
        +link-colors($black, $black, $black, $black, $black)
        border-color: $black

  .article__subpage-head
    @extend %headline
    margin: 0 auto $small auto
    font-size: $font-xl--px
    font-size: $font-xl--rem
    max-width: remify($longform-content-max-width)
    +respond-min($break-1)
      font-size: $font-xxl--px
      font-size: $font-xxl--rem
      margin-top: 0
    a
      display: block
      position: relative
      top: -$large
      border-bottom: 0px

  //there is a strange ff rendering bug, therefore
  //we have an earlier breakpoint for index
  .article__subpage-index
    font-family: $font-tabletgothic
    display: none
    padding: 0 $small
    min-width: $stamp-width
    +respond-min(em(870px))
      display: inline
    .article__subpage-active
      color: $black
    ol
      padding: 0
      margin: 0

  .article__subpage-index__title
    text-transform: uppercase
    font-size: $font-s

  .article__subpage-index__item
    +pie-clearfix
    display: block
    margin: $gutter 0
    font-size: $font-s

  .article__subpage-index__item__title-wrap
    overflow: hidden
    display: block

  .article__subpage-index__item__title
    display: inline

  .article__subpage-index__item__count
    float: left
    min-width: em(40px)

  .article__subpage-chapter
    @extend %meta
    position: relative
    top: -$medium
    width: 100%
    background-color: $grey--bright
    span
      letter-spacing: $hair
      font-size: $font-s
      text-transform: uppercase
      margin: auto
      display: block
      text-align: center
      &:first-child
        font-family: $font-tabletgothic
        font-weight: bold
        padding-top: $large
      &:last-child
        padding-bottom: $large
      +respond-min($break-2)
        min-width: $longform-content-max-width

  .article__supertitle
    display: none

  .article__title
    font-family: $sans-serif-base-font
    color: $white
    line-height: 1.2
    margin-bottom: $tiny
    font-size: $font-xxxxl--px
    +respond-min($break-2)
      font-size: $font-xxxxxl--px

  .article__body
    padding-left: 0
    padding-right: 0
    background-color: $white
    p
      margin-bottom: $little
    p:first-of-type
      +respond-min($comments__break-overlap)
        padding-right: 0

  .article__page
    padding-top: $small
    padding-bottom: $small
    background-color: $color-page-bg
    +respond-min($break-1)
      padding-top: $medium
      padding-bottom: $medium
    &:first-child
      .article__page-wrap
        margin-bottom: 0

  .article__page-wrap
    +padded
    max-width: $max-longform-width
    margin: $fine auto $medium auto

  .quote--wide
    +respond-min($break-3)
      margin-left: $huge

  .article__opener
    margin-left: auto
    margin-right: auto

  .is-constrained
    max-width: remify($longform-content-max-width)
    &.padded
      +box-sizing(content-box)
    +respond-min($break-3)
      max-width: remify($longform-content-max-width*1.13)

  .figure-horizontal, .figure-horizontal--right
    max-width: remify($longform-inline-max-width)
    margin-left: auto
    margin-right: auto
    +respond-min(em($bp-adjust-horizontal-figures--2))
      position: relative
      width: 100%
      .figure__media, img
        float: none
        width: 100%
      .figure__caption, figcaption
        max-width: remify(240px)
        width: em(200px)
        position: absolute
        left: 100%
        padding-left: $gutter
        top: 0
        float: none
    +respond-min(em($bp-adjust-horizontal-figures--3))
      .figure__caption, figcaption
        width: em(220px)
    +respond-min(em($bp-adjust-horizontal-figures--4))
      .figure__caption, figcaption
        width: 100%
    .figure__media, img
      max-width: remify($longform-inline-max-width)
  .figure-horizontal--right
    +respond-min(em($bp-adjust-horizontal-figures--2))
      .figure__caption, figcaption
        right: 100%
        left: auto
  .figure-full-width
    .figure__caption, figcaption
      max-width: remify($longform-image-caption-max-width)
      padding-right: 0

  .inline-gallery__wrap
    max-width: em($longform-inline-max-width)
